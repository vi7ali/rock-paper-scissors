<!DOCTYPE html>
<html>
<head>
	<title>RPS Game!</title>
</head>
<body>
<script>
	let roundCount = 1;
	let playerScore = 0;
	let computerScore = 0;

	game();	
	game();
	game();
	game();
	game();

	function game() {  
	let comChoice = chooseComputer();
	let humChoice = prompt("Input your choice:"); // TODO input validation
	humChoice = humChoice.toLowerCase();
	playRound(humChoice, comChoice);
	}

	function chooseComputer() {

		let play = Math.floor(Math.random() * 3) + 1;	//random number between 1 and 3
		
		if(play == 1) { 
			play = "rock";
		}
		else if(play == 2) {
			play = "scissors";
		}
		else {
			play = "paper";
		}
		return play;
	}

	function checkWin(roundResult) { //Score, Round and Win check

		let statusMessage = `Player - ${playerScore}, Computer - 
				${computerScore}, Round ${roundCount}`;

		if(roundResult == "playerWin") {
			playerScore++;
		}
		else if(roundResult == "computerWin") {
			computerScore++;
		}

		if(roundCount < 5) { 
			console.log(statusMessage);
			roundCount++;
		}
		else { //Final round
		 	if(computerScore>playerScore) {
				console.log(statusMessage + " COMPUTER WINS");
			}
			else if(computerScore<playerScore) {
				console.log(statusMessage + " Player Wins");
			}
			else {
				console.log(statusMessage + " Draw!");
			}
		}
	}

	function playRound (playerSelection, computerSelection)	{

		switch(playerSelection) {
			case "rock":
				if(computerSelection=="rock")	{
					checkWin("draw");
					break;
				}
				else if(computerSelection=="scissors") {
					checkWin("playerWin");
					break;
				}
				else {
					checkWin("computerWin");
					break;
				}
			case "scissors":
				if(computerSelection=="rock")	{
					checkWin("computerWin");
					break;
				}
				else if(computerSelection=="scissors") {
					checkWin("draw");
					break;
				}
				else {
					checkWin("playerWin");
					break;
				}
			case "paper":
				if(computerSelection=="rock")	{
					checkWin("playerWin");
					break;
				}
				else if(computerSelection=="scissors") {
					checkWin("computerWin");
					break;
				}
				else {
					checkWin("draw");
					break;
				}
			}			
	}

</script>
</body>
</html>